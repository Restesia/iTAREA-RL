<!DOCTYPE html>
<html>
<head>
    <title>Metrics app: print results</title>
    <link rel="stylesheet" href="{{url_for('static', filename='css/index.css')}}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">

    <script>


        var resultData = `{{ result | tojson | safe }}`;

        function saveFile() {
        var now = new Date();
        var day = String(now.getDate()).padStart(2, "0");
        var month = String(now.getMonth() + 1).padStart(2, "0");
        var year = String(now.getFullYear()).slice(-2);
        var hours = String(now.getHours()).padStart(2, "0");
        var minutes = String(now.getMinutes()).padStart(2, "0");
        var filename = `${day}-${month}-${year}_${hours}.${minutes}.txt`;

        var blob = new Blob([resultData], { type: "text/plain" });
        var url = URL.createObjectURL(blob);
        var link = document.createElement("a");
        link.href = url;
        link.download = filename;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);

        
    }
    
    </script>
    

</head>
<body>
    <h1>Result</h1>
    <pre>{{ result }}</pre>

    <div class="container">
        <button class="button" id="save-button" onclick='saveFile()'>Save</button>
    </div>

    <div class="container">
        <a class="button left-button" href="{{ url_for(determine_back_route()) }}">back</a>
        <a class="button right-button" href="{{ url_for('index') }}">restart</a>
    </div>
</body>
</html>
